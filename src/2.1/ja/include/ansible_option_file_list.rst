
#. | :menuselection:`Ansible共通-->ファイル管理` では、Playbook内で定義している各モジュールで使用するファイルとファイル埋込変数のメンテナンス(閲覧/登録/更新/廃止)を行います。
   | ファイル管理でファイル素材を登録しておくことで、Playbook内で定義している各モジュールで使用するファイルをファイル埋込変数名で指定することができます。

   .. figure:: /images/ja/ansible_common/file_management/contents_list.png
      :width: 800px
      :alt: サブメニュー画面（ファイル管理）

      サブメニュー画面（ファイル管理）

#. | :guilabel:`＋ 登録` ボタンより、ファイル管理情報の登録を行います。

   .. figure:: /images/ja/ansible_common/file_management/contents_list.gif
      :width: 800px
      :alt: 登録画面（ファイル管理）
   
      登録画面（ファイル管理）
   

#. | 登録画面の項目は以下のとおりです。

   .. list-table:: 登録画面項目一覧（ファイル管理）
      :widths: 15 50 5 10 20
      :header-rows: 1
      :align: left

      * - 項目
        - 説明
        - 入力必須 
        - 入力方法
        - 制約事項
      * - ファイル埋込変数名 
        - | 各モジュールのパラメータに埋め込む変数名を入力します。
          | 変数名は、「CPF_****」形式で入力します。
          | \****\：半角英数字とアンダースコア（ _ ）が利用可能です。(最小値:1バイト、最大値:128バイト)
        - ○ 
        - 手動入力
        - 説明欄記載のとおり
      * - ファイル素材
        - 各モジュールで使用するファイルをアップロードします。 
        - ○ 
        - ファイル登録
        - 最大サイズ100Mバイト
      * - 備考
        - 自由記述欄です。
        - ー 
        - 手動入力
        - 最大長4000バイト


.. note:: | **ファイル埋込変数の使用例**
   | ファイル管理で登録したファイルをPlaybookに記述する場合、該当のパラメータにファイル埋込変数名を記述します。ファイル埋込変数名を使用しない場合、代入値自動登録設定で登録した変数や該当ファイルのパスを記述します。
   | ※ファイル名にスペースなどが含まれている場合、適切にクォーテーションで囲まないと、作業実行時にエラーになる場合があります。
   

   | Exp) 

   - | ファイル管理で登録したhostsファイルをファイル埋め込み変数を使用して作業対象サーバの/etc/配下にコピーする場合
   
     #. | ファイル管理メニューから下記のようにhostsファイルを登録します。
  
        .. list-table:: ファイル管理の登録内容
           :widths: 30 40
           :header-rows: 1
           :align: left
     
           * - ファイル埋込変数名
             - ファイル素材
           * - CPF_hosts 
             - hosts 

  
     #. | 下記のようにPlaybookを記述します。
        | ※destはファイル名も記述してください。ファイル名の指定がない場合、登録したファイル素材のファイル名の前にITAの管理番号が付与された名前のファイル名で処理されます。 
        | 　たとえば、dest=/etc/ とした場合、ファイル名は/etc/10桁の数値_hostsとなります。
  
        | **Playbookの記述**                                                    
                                                                              
        .. code-block:: yaml

           - copy: src='{{ CPF_hosts }}' dest=/etc/hosts  
  
   - | ファイル管理で登録したtool.tgzファイルをファイル埋込変数を使用して作業対象サーバの/usr/local/bin/配下に解凍する場合
   
     #. | ファイル管理メニューから下記のようにtool.tgzファイルを登録します。
  
        .. list-table:: ファイル管理の登録内容
           :widths: 30 40
           :header-rows: 1
           :align: left
     
           * - ファイル埋込変数名
             - ファイル素材
           * - CPF_tool_tgz
             - tool.tgz   

  
     #. | 下記のようにPlaybookを記述します。
  
        | **Playbookの記述**                                     
                                                                              
        .. code-block:: yaml                                                  
                                                                              
           - unarchive: src={{ CPF_tool_tgz }} dest=/usr/local/bin

