
<!DOCTYPE html>

<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <title>3. Ansible Automation Platform 連携 &#8212; Documentation  ドキュメント</title>
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/option.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/exastro_documents.css?v=2" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/swagger/swagger-ui.css" />
    
    <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/jquery.js"></script>
    <script src="../../../../_static/underscore.js"></script>
    <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/sphinx_highlight.js"></script>
    <script src="../../../../_static/clipboard.min.js"></script>
    <script src="../../../../_static/copybutton.js"></script>
    <script src="../../../../_static/tabs.js"></script>
    <script src="../../../../_static/translations.js"></script>
    <script src="../../../../_static/jquery-3.6.3.min.js"></script>
    <script src="../../../../_static/exastro_documents.js?v=1"></script>
    <script src="../../../../_static/swagger/swagger-ui-bundle.js"></script>
    <script src="../../../../_static/swagger/swagger-ui-standalone-preset.js"></script>
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
    <link rel="index" title="索引" href="../../../../genindex.html" />
    <link rel="search" title="検索" href="../../../../search.html" />
    <link rel="next" title="オーガナイゼーション管理" href="../organization_management/index.html" />
    <link rel="prev" title="2. リソースプラン" href="plan.html" /> 
  </head>
<body id="page" class="ja">


<div id="container">

<div id="header">
  <header class="divInner">
    <!-- Exastro logo -->
    <div id="logo"><a href="https://ita.exastro.org/"><img src="../../../../_static/img/exastro.svg" alt="Exastro"></a></div>
    <!-- Project name -->
    <div id="projectName"><a href="../../../../index.html">Documentation</a></div>
    <!-- Heaedr navigation -->
    <div id="headerSearch">
      <form class="search" action="../../../../search.html" method="get">
        <input type="text" name="q" aria-labelledby="searchlabel">
        <button type="submit" value="検索"><img src="../../../../_static/img/search.png" alt="検索"></button>
      </form>
    </div>
  </header>
</div><!-- End #header -->


<div id="toolbar">
  <div class="divInner">
    
    <div id="documentVersion">
      <dl>
        <dt>Document version</dt>
        <dd>
          <div>
            <select name="version" onchange="location.href=value;">
                file_path: 2.0/ja/manuals/platform_management/aap
                  <option value="#"
                  selected
                  >current</option>
                file_path: 2.0/ja/manuals/platform_management/aap
                  <option value="#"
                  selected
                  >2.0 (current)</option>
                file_path: 2.1/ja/manuals/platform_management/aap
            </select>
          </div>
        </dd>
      </dl>
    </div>

    <div id="documentLanguage">
      <dl>
        <dt>Language</dt>
        <dd>
          <div>
            <select name="lang" onchange="location.href=value;">
                file_path: 2.0/ja/manuals/platform_management/aap
                hasdoc: True
                  <option value="#"
                  selected
                  >日本語</option>
                file_path: 2.0/en/manuals/platform_management/aap
                hasdoc: False
            </select>
          </div>
        </dd>
      </dl>
    </div>
    <div id="toolbarNavigation">
      <ul>
        <li class="prev"><a href="plan.html" title="前のトピックへ"><span class="section-number">2. </span>リソースプラン</a></li>
        <li class="next"><a href="../organization_management/index.html" title="次のトピックへ">オーガナイゼーション管理</a></li>
      </ul>
    </div>
  </div>
</div><!-- End #toolbar -->

<div id="sideMenu">

  <div id="menuButton"></div>
  
  <aside class="divInner">
    <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Exastro IT Automation Documentation 2.0</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../../index.html#id1">日本語</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../configuration/index.html">構成・構築ガイド</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../installation/index.html">インストール</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">マニュアル</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="index.html">システム管理</a><ul class="current">
<li class="toctree-l5"><a class="reference internal" href="organization.html">1. Organization (オーガナイゼーション)</a></li>
<li class="toctree-l5"><a class="reference internal" href="plan.html">2. リソースプラン</a></li>
<li class="toctree-l5 current"><a class="current reference internal" href="#">3. Ansible Automation Platform 連携</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../organization_management/index.html">オーガナイゼーション管理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../it_automation_base/index.html">基本操作</a></li>
<li class="toctree-l4"><a class="reference internal" href="../create_param/index.html">パラメータ管理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ansible-driver/index.html">Ansible ドライバ</a></li>
<li class="toctree-l4"><a class="reference internal" href="../maintenance/index.html">メンテナンス</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/index.html">リファレンス</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contribute/index.html">貢献</a></li>
</ul>
</li>
</ul>
</li>
</ul>

    <!-- <ul>
      <li class="toctree-l1"><a class="reference internal" href="../../../../genindex.html">索引</a></li>
    </ul> -->
    
  </aside>
</div><!-- End #sideMenu -->


<div id="tableOfContents">
  <div id="tocButton"></div>
  <ul>
<li><a class="reference internal" href="#">3. Ansible Automation Platform 連携</a><ul>
<li><a class="reference internal" href="#id1">3.1. 目的</a></li>
<li><a class="reference internal" href="#ansible-automation-controller">3.2. Ansible Automation Controller の登録</a><ul>
<li><a class="reference internal" href="#id2">3.2.1. 前提条件</a></li>
<li><a class="reference internal" href="#id3">3.2.2. 登録方法</a></li>
<li><a class="reference internal" href="#ansible-automation-contoller">3.2.3. Ansible Automation Contoller 連携の確認</a></li>
<li><a class="reference internal" href="#id4">3.2.4. その他制約事項・備考</a><ul>
<li><a class="reference internal" href="#id5">Ansible Automation Controller 登録を再実行する場合</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

</div>


<div id="contents">
<main class="divInner">

 <div id="breadcrumbs">
  <ul>
    <li><a href="../../../../index.html">HOME</a></li>
    <li><a href="../../../index.html">Exastro IT Automation Documentation 2.0</a></li>
    <li><a href="../index.html">マニュアル</a></li>
    <li><a href="index.html">システム管理</a></li>
    
    <li><span class="section-number">3. </span>Ansible Automation Platform 連携</li>
  </ul>
</div>

<div id="article">
<article class="divInner">
<div class="body" role="main">

  <section id="ansible-automation-platform">
<h1><span class="section-number">3. </span>Ansible Automation Platform 連携<a class="headerlink" href="#ansible-automation-platform" title="この見出しへのパーマリンク">¶</a></h1>
<section id="id1">
<h2><span class="section-number">3.1. </span>目的<a class="headerlink" href="#id1" title="この見出しへのパーマリンク">¶</a></h2>
<div class="line-block">
<div class="line">本書では、システム管理者がオーガナイゼーションに所属するユーザーに対して、Ansible Core もしくは Ansible Automation Controller の利用を制御するための方法について紹介します。</div>
</div>
</section>
<section id="ansible-automation-controller">
<h2><span class="section-number">3.2. </span>Ansible Automation Controller の登録<a class="headerlink" href="#ansible-automation-controller" title="この見出しへのパーマリンク">¶</a></h2>
<div class="line-block">
<div class="line">Ansible Automation Controller の登録をすることで、“プロジェクト”、”インベントリ”、”認証情報”の組合せで”ジョブテンプレート”を作成しAnsibleを実行できます。</div>
<div class="line">複数の“ジョブテンプレート”を組み合せて”ワークフロージョブテンプレート”を作成することによって、より多彩な作業フローを表現することができます。</div>
</div>
<section id="id2">
<h3><span class="section-number">3.2.1. </span>前提条件<a class="headerlink" href="#id2" title="この見出しへのパーマリンク">¶</a></h3>
<div class="line-block">
<div class="line">本作業には下記のコマンドが必要となるため、事前にインストールをしてください。</div>
</div>
<ul class="simple">
<li><p>作業クライアントに必要なアプリケーション</p>
<ul>
<li><p><kbd class="kbd docutils literal notranslate">curl</kbd></p></li>
<li><p><kbd class="kbd docutils literal notranslate">git</kbd></p></li>
<li><p><kbd class="kbd docutils literal notranslate">jq</kbd></p></li>
</ul>
</li>
</ul>
</section>
<section id="id3">
<h3><span class="section-number">3.2.2. </span>登録方法<a class="headerlink" href="#id3" title="この見出しへのパーマリンク">¶</a></h3>
<div class="line-block">
<div class="line">Ansible Automation Controller の Exastro IT Automation への登録には、下記の2通りの方法があります。</div>
</div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-6Kit5a6a44OV44Kh44Kk44Or44Go44K544Kv44Oq44OX44OI5Yip55So" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-0-6Kit5a6a44OV44Kh44Kk44Or44Go44K544Kv44Oq44OX44OI5Yip55So" name="6Kit5a6a44OV44Kh44Kk44Or44Go44K544Kv44Oq44OX44OI5Yip55So" role="tab" tabindex="0">設定ファイルとスクリプト利用</button><button aria-controls="panel-0-UmVzdCBBUEkg5Yip55So" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-UmVzdCBBUEkg5Yip55So" name="UmVzdCBBUEkg5Yip55So" role="tab" tabindex="-1">Rest API 利用</button></div><div aria-labelledby="tab-0-6Kit5a6a44OV44Kh44Kk44Or44Go44K544Kv44Oq44OX44OI5Yip55So" class="sphinx-tabs-panel group-tab" id="panel-0-6Kit5a6a44OV44Kh44Kk44Or44Go44K544Kv44Oq44OX44OI5Yip55So" name="6Kit5a6a44OV44Kh44Kk44Or44Go44K544Kv44Oq44OX44OI5Yip55So" role="tabpanel" tabindex="0"><ul class="simple">
<li><p>特徴</p></li>
</ul>
<div class="line-block">
<div class="line">Rest API を使った登録方法に比べ、利用するパラメータ情報の事前準備が不要なためユーザの操作に向いています。</div>
</div>
<ul class="simple">
<li><p>登録方法</p></li>
</ul>
<div class="line-block">
<div class="line">GitHub リポジトリから取得した資材の中にある、シェルスクリプトを実行し Ansible Automation Controller を登録します。</div>
</div>
<ol class="arabic">
<li><p>Ansible Automation Controller 登録用シェルスクリプトを、リポジトリから <kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">git</kbd> <kbd class="kbd docutils literal notranslate">clone</kbd></kbd> により取得します。</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-number">リスト 3.9 </span><span class="caption-text">コマンド</span><a class="headerlink" href="#id6" title="このコードへのパーマリンク">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Exastro Platform の資材を入手</span>
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/exastro-suite/exastro-platform.git
</pre></div>
</div>
</div>
</li>
<li><p>設定ファイルの <kbd class="kbd docutils literal notranslate">CONF_BASE_URL</kbd> に Exastro システムの管理用エンドポイント URL を設定します。</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-number">リスト 3.10 </span><span class="caption-text">コマンド</span><a class="headerlink" href="#id7" title="このコードへのパーマリンク">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Exastro Platform への接続のための設定情報を登録</span>
vi<span class="w"> </span>./exastro-platform/tools/api-auth.conf
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">例えば、<a class="reference internal" href="../../installation/helm_on_kubernetes.html#ingress-setting"><span class="std std-ref">サービス公開の設定 (Ingress の設定)</span></a> をした場合は下記のようになります。</div>
</div>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-number">リスト 3.11 </span><span class="caption-text">api-auth.conf</span><a class="headerlink" href="#id8" title="このコードへのパーマリンク">¶</a></div>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">- CONF_BASE_URL=http://platform-auth:8001</span>
<span class="gi">+ CONF_BASE_URL=http://exastro-suite-mng.example.local</span>
<span class="w"> </span> CURL_OPT=-sv
</pre></div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">自己証明書を利用している場合、証明書エラーが発生します。</div>
<div class="line">設定ファイル内の <kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">CURL_OPT=</kbd>-<kbd class="kbd docutils literal notranslate">sv</kbd></kbd> を <kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">CURL_OPT=</kbd>-<kbd class="kbd docutils literal notranslate">svk</kbd></kbd> に変更することで証明書エラーを回避できますが、認証機関から発行された正しい証明書をインストールすることを推奨します。</div>
</div>
</div>
</li>
<li><p>Ansible Automation Controller 情報の設定</p>
<div class="line-block">
<div class="line">設定ファイルの作成は、<code class="file docutils literal notranslate"><span class="pre">./exastro-platform/tools/initial-settings-ansible.sample.json</span></code> を基に、作成する Ansible Automation Controller の情報を指定した JSON ファイルを基に作成します。</div>
</div>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-number">リスト 3.12 </span><span class="caption-text">コマンド</span><a class="headerlink" href="#id9" title="このコードへのパーマリンク">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cp<span class="w"> </span>-pi<span class="w"> </span>./exastro-platform/tools/initial-settings-ansible<span class="o">{</span>.sample,<span class="o">}</span>.json

vi<span class="w"> </span>./exastro-platform/tools/initial-settings-ansible.json
</pre></div>
</div>
</div>
<details>
  <summary>initial-settings-ansible.sample.json</summary><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;input_limit_setting&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;execution_engine_list&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;Ansible Automation Controller&quot;</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;initial_data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;ansible_automation_controller_host_list&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;file&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;ssh_private_key_file&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LS0tLS1CRUdJTiBPUEVOU1NIIFBSSVZBVEUgS0VZLS0tLS0KYjNCbGJuTnphQzFyWlhrdGRqRUFBQUFBQkc1dmJtVUFBQUFFYm05dVpRQUFBQUFBQUFBQkFBQUJsd0FBQUFkemMyZ3RjbgpOaEFBQUFBd0VBQVFBQUFZRUF0V0ZvVVA5ZkZSRlhUTTV0U2s4cmU1dTVEVjNqclF3VVd5d2swMkwrZ0tkNElsOFQ4TnBkCk40Z3ZGVkMxM1VueGNxc1pxVWdEWk41NnphSnMrdThQcTBlVjl2R0dkWmZDcU11OHRrbzh5WUw2MGQ2VUVoVXFOVVJkb1UKSEJ3bngzbjZidlNWMVE0em56V0JBNVBqOFl3SENiL0swVGFEMndvMkRkbFhqTXhhTlpXTXlpRFVMbE1pSk02VFdCU0lYMwo2emE5ZnI2cGFmak5Vc0hBTk9YSTdGbUFQcC9Jcy80TmtJVkhZN2M1UkJkUTUvNWgrTCtxRmlVazhKbE9vcFdnMjJOWWlXCkpKUGM0U09iTWxtRUY1OEdMdloxZTlCS0FvaXEvdWIvVmlhZG9hRFlyTzlEM0U3UW1NTldWMjNNMnMyN2tnS0ZKcFJJSUMKbmllZlJyaTdkOVhEYldoclBFY1FlRUMyZnNrRzVyY3Q0RFhrQUtVVCtSTkdwMll6bWZqSHlHNkRPWkJIa1RCNnJ5OVF3SgpRaFpFTjEvM3k2K0Q1V1BpbWlxeVFBNmtXdnZYZUtHWkhzZEhLdG5QaGZra1EyUWlteFgyWFRHaGZwdjRSUkUzZWNGUmxRClQvenRLeWg5enIzWmd4UU1nWHgwdEJ5V2dZSUJwZVZHa1dFTTVkeTNBQUFGa1BlMkRlYjN0ZzNtQUFBQUIzTnphQzF5YzIKRUFBQUdCQUxWaGFGRC9YeFVSVjB6T2JVcFBLM3VidVExZDQ2ME1GRnNzSk5OaS9vQ25lQ0pmRS9EYVhUZUlMeFZRdGQxSgo4WEtyR2FsSUEyVGVlczJpYlBydkQ2dEhsZmJ4aG5XWHdxakx2TFpLUE1tQyt0SGVsQklWS2pWRVhhRkJ3Y0o4ZDUrbTcwCmxkVU9NNTgxZ1FPVDQvR01Cd20veXRFMmc5c0tOZzNaVjR6TVdqV1ZqTW9nMUM1VElpVE9rMWdVaUY5K3Mydlg2K3FXbjQKelZMQndEVGx5T3haZ0Q2ZnlMUCtEWkNGUjJPM09VUVhVT2YrWWZpL3FoWWxKUENaVHFLVm9OdGpXSWxpU1QzT0VqbXpKWgpoQmVmQmk3MmRYdlFTZ0tJcXY3bS8xWW1uYUdnMkt6dlE5eE8wSmpEVmxkdHpOck51NUlDaFNhVVNDQXA0bm4wYTR1M2ZWCncyMW9henhIRUhoQXRuN0pCdWEzTGVBMTVBQ2xFL2tUUnFkbU01bjR4OGh1Z3ptUVI1RXdlcTh2VU1DVUlXUkRkZjk4dXYKZytWajRwb3Fza0FPcEZyNzEzaWhtUjdIUnlyWno0WDVKRU5rSXBzVjlsMHhvWDZiK0VVUk4zbkJVWlVFLzg3U3NvZmM2OQoyWU1VRElGOGRMUWNsb0dDQWFYbFJwRmhET1hjdHdBQUFBTUJBQUVBQUFHQkFMRHVJTzBKL3YwMUdqeXhETWswNjB5N2ZjCnM5TUErb3ZkNmw5QkpEK2RFVUM4c3poZWNuaTFEVlJtQjdoN3dpR2lYcUk3RU9yMGpoQVZmQVBxQ1ZQR3F1L09tVGRyOFUKMSswQ09NWjFLbEREdE5tdVRqQkpkdy9ZN2FDVTNXWlROZm1GeE51QzdKbUsrUWFKWk4yRWZTZVRjWVlNYXViL2JtUWc1RwpXZkhka1kyOW9VVzJ1bU9wOHArRzV4SS9qVHZpQXpHS3dmWG5FaUkxKzc0anQzZndTVzFkUEExKzVFUDRVZmphRUdwUlQzCnpaTlFnTTgrWDdNVWJyRklTdjJzQ0VWSU54cGJDSE9iQkRZcTdodUljeDdKUVEvcW5EMVJGdFhBa3d4M1ZkMFF4elZUTDUKZXF6ci9jc3h6S3l1M08yVE5weWVodE1SWVB6M2dXZ2xieFI1SStObWl1VGlTQWFHa1o2OXJqblY0bVNmL25xUnJwUWRpeAozS1E1bUZldVNUUFdEdXZQNFdWNlJybzBPajRjalZnNTlGNHVWM05xQmpvMFpXYmt1QnhZeDRBK2hsZjcwMmdMLzVMZTBPCllTc1dFS0U5aFhueHZ5b0NBUTBCLy9meDFnaHkxY2xQWi9JR3FpWDYwUEQrY0FmTnFWNmt6aFo5WmZmQmVOZ2x3NThRQUEKQU1FQTBqbVF4VVc2WW9ZRnovUFg5aXgrNEd3VXh4WWFTdlVYRDJHZGt4cGtkYS9EV3lKUlJFd1FjTzhPQTdhWUFhV0hxSwp1T1ZCWVJlY3h0Z01SbzUreUNpZjVoNE9HNzVyVEtSQ0NRLy9Td2hyS25iQjFoOVJ0Q2dWNjlSd0tMSUhxcXo0dGQ0V20wCkw0NmFtditjd0ZrVVdxOFRtdzNkR1NlV3AydURQcjVxSjVGWDlEdmZRWUNKSEVkNThnN2lESXdzMUd3VExKaTJ3L0J1QlEKbzB2MUw4dGo0eG1MTUxpcW1zdDZLRHM3cHBlOGpJYTgycHVTSUJ1ZWJ5Y3pKdXljcmNBQUFBd1FEbU5SV25qcisxWmJSdgpPRjJVT2hGQ2I2UVlpQkFsTzVuWVZQUnQ2amhMWmdvMjlkUVUwUmRnYzNObmtOdzY1ZFpQbnZVMTlaamkzcFBlRnVQczJQCnEyaDg1aFNCK3VRR3JodEovRGM2MU1ZS2k5cjkxQmtvd0ZHSDR3YW9mSUsyYmF1V2VFMGg3UFFmajhrSzZVbndLbnpPSTcKc1o2anJTZStxaHQwMzkxUzhTb2F1bkhnMXNsOTRYS092bG1RQUpQMHNuS2VMcGIyalZIR0ZTR0JRdG1GQUh2aXV6Zm5nUgpGc3hrd2ROSU1ERGxLNmxVMnFhbkppL0NBM0VOQldDLzhBQUFEQkFNbXoyUkVEbllkSjM0N2prWWFDNzNHdGtjWDZDN0NxCjZ6cGRXQkZ6Zjd0NkhJbzJMdUlPenVFa2IxV0VjOFZibTBHbTA1YkZ4YnFEYjF2OWpJRmErTG9qTHVOUmFoSEZHVFRRUDYKTk9DMzA2SDd2TWgwMStNUVJNaERKYW9GRlRRVy9uSVBIQldwcDVJNzFVN0FNa0d6cXJoWVU5dlVNSXBNS2taQUQyYWF3dwpreUp6eFZzTFhUQXhrT3BVU3lWZmJsZVBKZXJpVmIydmVXbm5RUmRnRm02empSeXpSTXlYODFkaldzelNDTVZUeWI2YW9GCjdBYjZPZzlib0lnRmVQU1FBQUFCTnpjR2hwYm5oQU1qWmxNR05pWkRrM05UZGxBUUlEQkFVRwotLS0tLUVORCBPUEVOU1NIIFBSSVZBVEUgS0VZLS0tLS0K&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;parameter&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;host&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aap.example.com&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;authentication_method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;鍵認証(パスフレーズなし)&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;user&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;awx&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;password&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;ssh_private_key_file&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aap_id_rsa&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;passphrase&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;isolated_tower&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;False&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;remarks&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;interface_info_ansible&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;parameter&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;execution_engine&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Ansible Automation Controller&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;representative_server&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aap.example.com&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;ansible_automation_controller_protocol&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;ansible_automation_controller_port&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;443&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;organization_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;authentication_token&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LwWw3dwoHGx19ZhP1YQZU0JdZzobFv&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;delete_runtime_data&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;proxy_address&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;proxy_port&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</details><div class="line-block">
<div class="line">各パラメータについては下記を参照してください。</div>
</div>
<details>
  <summary>Ansible Automation Controller 登録時のパラメータ(表示・非表示)</summary><table class="filter-table docutils align-left" id="id10">
<caption><span class="caption-number">表 3.2 </span><span class="caption-text">Ansible Automation Controller 登録時のパラメータ</span><a class="headerlink" href="#id10" title="このテーブルへのパーマリンク">¶</a></caption>
<colgroup>
<col style="width: 30%" />
<col style="width: 40%" />
<col style="width: 30%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>パラメータ</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>設定値</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>input_limit_setting</p></td>
<td><div class="line-block">
<div class="line">Exastro IT Automation の画面上から <span class="menuselection">Ansible共通 ‣ インターフェース情報</span> (一部※) と <span class="menuselection">Ansible Automation Controller ホスト一覧</span> の編集可否を指定。</div>
<div class="line">▼ <span class="menuselection">Ansible共通 ‣ インターフェース情報</span> の入力制限がかかる項目:</div>
<div class="line">- <span class="menuselection">実行エンジン</span></div>
<div class="line">- <span class="menuselection">Ansible Automation Controller インターフェース</span></div>
<div class="line">- <span class="menuselection">Proxy</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><strong class="program">true</strong>: Exastro IT Automation の画面上から編集不可</div>
<div class="line"><strong class="program">false</strong>: Exastro IT Automation の画面上から編集可能</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>execution_engine_list</p></td>
<td><div class="line-block">
<div class="line"><span class="menuselection">Ansible共通 ‣ インターフェース情報 ‣ 実行エンジン</span> の選択肢に入れる項目を指定。</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">Ansible</kbd>-<kbd class="kbd docutils literal notranslate">Core</kbd></kbd>: コミュニティ版Ansible</div>
<div class="line"><kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">Ansible</kbd> <kbd class="kbd docutils literal notranslate">Automation</kbd> <kbd class="kbd docutils literal notranslate">Controller</kbd></kbd>: Red Hat Ansible Automation Controller</div>
<div class="line">上記のいずれか、または、その両方を指定。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>initial_data.ansible_automation_controller_host_list[*].file.ssh_private_key_file</p></td>
<td><p>Ansible Automation Controller に接続するために登録する秘密鍵ファイルを Base64 エンコードした値。</p></td>
<td><p>秘密鍵ファイルのBase64 エンコード文字列</p></td>
</tr>
<tr class="row-odd"><td><p>initial_data.ansible_automation_controller_host_list[*].parameter.host</p></td>
<td><p>Ansible Automation Controller のコントロールノードのホスト名を指定。</p></td>
<td><p>Ansible Automation Controller のコントロールノードのホスト名</p></td>
</tr>
<tr class="row-even"><td><p>initial_data.ansible_automation_controller_host_list[*].parameter.authentication_method</p></td>
<td><div class="line-block">
<div class="line">認証方式の選択</div>
<div class="line">Ansible Core または Ansible Automation Controller から作業対象の機器へ接続する際の認証方式を選択します。</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><kbd class="kbd docutils literal notranslate">パスワード認証</kbd> : ログインパスワードの管理で●の選択と、ログインパスワードの入力が必須です。</div>
<div class="line"><kbd class="kbd docutils literal notranslate">鍵認証(パスフレーズなし)</kbd> : SSH 秘密鍵ファイル(id_ras)のアップロードが必須です。</div>
<div class="line"><kbd class="kbd docutils literal notranslate">鍵認証(パスフレーズあり)</kbd> : SSH 秘密鍵ファイル(id_ras)のアップロードと、パスフレーズの入力が必須です。</div>
<div class="line"><kbd class="kbd docutils literal notranslate">鍵認証(鍵交換済み)</kbd> : SSH 秘密鍵ファイル(id_ras)のアップロードは必要ありません。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>initial_data.ansible_automation_controller_host_list[*].parameter.user</p></td>
<td><div class="line-block">
<div class="line">Ansible Automation Controller に SSH 接続する場合のユーザ名を指定。</div>
<div class="line">プロジェクトパス(/var/lib/awx/projects)への書き込み制限が必要</div>
</div>
</td>
<td><div class="line-block">
<div class="line">awx</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>initial_data.ansible_automation_controller_host_list[*].parameter.password</p></td>
<td><div class="line-block">
<div class="line">パスワード認証する場合のパスワードを指定。</div>
<div class="line">※ 最大長128バイト</div>
</div>
</td>
<td><p>任意の文字列</p></td>
</tr>
<tr class="row-odd"><td><p>initial_data.ansible_automation_controller_host_list[*].parameter.ssh_private_key_file</p></td>
<td><p>Ansible Automation Controller に接続するために登録する秘密鍵ファイルのファイル名。</p></td>
<td><p>秘密鍵ファイルのファイル名</p></td>
</tr>
<tr class="row-even"><td><p>initial_data.ansible_automation_controller_host_list[*].parameter.passphrase</p></td>
<td><div class="line-block">
<div class="line">SSH 秘密鍵ファイルにパスフレーズが設定されている場合、そのパスフレーズを指定。</div>
<div class="line">※ 最大長256バイト</div>
</div>
</td>
<td><p>パスフレーズ</p></td>
</tr>
<tr class="row-odd"><td><p>initial_data.ansible_automation_controller_host_list[*].parameter.isolated_tower</p></td>
<td><p>このノードが Ansible Automation Controller の Execution node であるかどうかを指定。</p></td>
<td><div class="line-block">
<div class="line"><kbd class="kbd docutils literal notranslate">True</kbd> : Execution node である場合。</div>
<div class="line"><kbd class="kbd docutils literal notranslate">False</kbd> : Execution node でない場合。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>initial_data.ansible_automation_controller_host_list[*].parameter.remarks</p></td>
<td><p>備考</p></td>
<td><p>任意の文字列</p></td>
</tr>
<tr class="row-odd"><td><p>initial_data.parameter.execution_engine</p></td>
<td><div class="line-block">
<div class="line">実行エンジンの指定</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">Ansible</kbd>-<kbd class="kbd docutils literal notranslate">Core</kbd></kbd>: コミュニティ版Ansible</div>
<div class="line"><kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">Ansible</kbd> <kbd class="kbd docutils literal notranslate">Automation</kbd> <kbd class="kbd docutils literal notranslate">Controller</kbd></kbd>: Red Hat Ansible Automation Controller</div>
<div class="line">上記のいずれかを指定。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>initial_data.parameter.representative_server</p></td>
<td><div class="line-block">
<div class="line">代表ホスト</div>
<div class="line"><span class="menuselection">Ansible Automation Controller ホスト一覧</span> に登録されいるホストの一覧より、 Exastro IT Automation と通信する Ansible Automation Controller のホストを選択します。</div>
<div class="line">※ 実行エンジンが Ansible Automation Controller の場合に入力必須</div>
</div>
</td>
<td><p>Ansible Automation Controller ホスト</p></td>
</tr>
<tr class="row-odd"><td><p>initial_data.parameter.ansible_automation_controller_protocol</p></td>
<td><div class="line-block">
<div class="line">Ansible Automation Controller サーバとの通信プロトコルを <kbd class="kbd docutils literal notranslate">http</kbd> か <kbd class="kbd docutils literal notranslate">https</kbd> のどちらかを入力します。</div>
<div class="line">通常は https です。</div>
<div class="line">※ 実行エンジンが Ansible Automation Controller の場合に入力必須</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><kbd class="kbd docutils literal notranslate">http</kbd></div>
<div class="line"><kbd class="kbd docutils literal notranslate">https</kbd></div>
<div class="line">上記のいずれか。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>initial_data.parameter.ansible_automation_controller_port</p></td>
<td><div class="line-block">
<div class="line">Ansible Automation Controller サーバの接続ポート(80/443)を入力します。通常は HTTPS(443)です。</div>
<div class="line">※ 実行エンジンが Ansible Automation Controller の場合に入力必須</div>
</div>
</td>
<td><p>ポート番号</p></td>
</tr>
<tr class="row-odd"><td><p>initial_data.parameter.organization_name</p></td>
<td><div class="line-block">
<div class="line">Ansible Automation Controller サーバに登録されている組織名を選択します。</div>
<div class="line">※ 実行エンジンが Ansible Core 以外の場合に入力必須</div>
</div>
</td>
<td><p>組織名の文字列</p></td>
</tr>
<tr class="row-even"><td><p>initial_data.parameter.authentication_token</p></td>
<td><div class="line-block">
<div class="line">Exastro IT Automation から Ansible Automation Controller サーバに接続するユーザーの認証トークンを入力します。</div>
<div class="line">※ 実行エンジンが Ansible Automation Controller の場合に入力必須</div>
</div>
</td>
<td><p>認証トークン文字列</p></td>
</tr>
<tr class="row-odd"><td><p>initial_data.parameter.delete_runtime_data</p></td>
<td><div class="line-block">
<div class="line">作業実行時に Exastro IT Automation と Ansible Automation Controller 内に一時的に生成されるデータリソースを作業終了後に削するかを選択します。</div>
<div class="line">※ 実行エンジンが Ansible Automation Controller の場合に入力必須</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><kbd class="kbd docutils literal notranslate">True</kbd> : 作業終了時にリソースを削除する</div>
<div class="line"><kbd class="kbd docutils literal notranslate">False</kbd> : 作業終了時にリソースを削除しない</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>initial_data.parameter.proxy_address</p></td>
<td><div class="line-block">
<div class="line">Exastro IT Automation がプロキシ環境下にある場合、Ansible/ Ansible Automation Controller サーバまでの疎通のために設定が必要な場合があります。</div>
<div class="line">プロキシサーバのURLが <a class="reference external" href="http://proxy.example.com:8080">http://proxy.example.com:8080</a> の場合、<kbd class="kbd docutils literal notranslate">http://proxy.example.com</kbd> を入力します。</div>
<div class="line">※ 最大128バイト</div>
</div>
</td>
<td><p>プロキシサーバのURL</p></td>
</tr>
<tr class="row-odd"><td><p>initial_data.parameter.proxy_port</p></td>
<td><div class="line-block">
<div class="line">Exastro IT Automation がプロキシ環境下にある場合、Ansible/ Ansible Automation Controller サーバまでの疎通のために設定が必要な場合があります。</div>
<div class="line">プロキシサーバのURLが <a class="reference external" href="http://proxy.example.com:8080">http://proxy.example.com:8080</a> の場合、<kbd class="kbd docutils literal notranslate">8080</kbd> を入力します。</div>
</div>
</td>
<td><p>プロキシサーバのポート番号</p></td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">※ 認証方式が鍵認証（鍵交換済み）に設定する為に必要な公開鍵ファイルの配布</div>
<div class="line">・Ansible Core の場合</div>
<div class="line">ansible がインストールされているサーバーの実行ユーザー「Ansible 共通コンソール=&gt;インターフェース情報に設定されている実行ユーザー」から作業対象ホストに ssh 接続します。</div>
<div class="line">実行ユーザーの公開鍵ファイルをログイン先ユーザーの authorized_keys にコピーして下さい。</div>
<div class="line"><br /></div>
<div class="line">・ Ansible Automation Controller の場合</div>
<div class="line">Ansible Automation Controller の awx ユーザーから作業対象ホストに ssh 接続しています。</div>
<div class="line">awx ユーザーの公開鍵ファイルをログイン先ユーザーの authorized_keys にコピーして下さい。ブラウザより Ansible Automation Controller にログインし、「設定」→「ジョブ」→「分離されたジョブに公開するパス」に「/var/lib/awx/.ssh/」を設定します。</div>
</div>
</div>
</details></li>
<li><p>Ansible Automation Controller 作成実行</p>
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-number">リスト 3.13 </span><span class="caption-text">コマンド</span><a class="headerlink" href="#id11" title="このコードへのパーマリンク">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./exastro-platform/tools/initial-settings-ansible.sh<span class="w"> </span>./exastro-platform/tools/initial-settings-ansible.json

organization<span class="w"> </span>id<span class="w"> </span>:<span class="w"> </span>INPUT-ORGANIZATION-ID-TO-SET<span class="w"> </span><span class="c1"># 設定先のオーガナイゼーションID</span>

your<span class="w"> </span>username<span class="w"> </span>:<span class="w"> </span>INPUT-YOUR-USERNAME<span class="w"> </span><span class="c1"># システム管理者のユーザ名を入力します</span>
your<span class="w"> </span>password<span class="w"> </span>:<span class="w"> </span>INPUT-USER-PASSWORD<span class="w"> </span><span class="c1"># システム管理者のパスワードを入力します</span>

Create<span class="w"> </span>an<span class="w"> </span>organization,<span class="w"> </span>are<span class="w"> </span>you<span class="w"> </span>sure?<span class="w"> </span><span class="o">(</span>Y/other<span class="o">)</span><span class="w"> </span>:<span class="w"> </span>Y<span class="w"> </span><span class="c1"># Y を入力すると Ansible Automation Controller の登録処理が開始します</span>
</pre></div>
</div>
</div>
<ul>
<li><p>成功時の結果表示</p>
<p>resultが”000-00000”が、 Ansible Automation Controller の作成に成功したことを示しています。</p>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-number">リスト 3.14 </span><span class="caption-text">実行結果(成功時)</span><a class="headerlink" href="#id12" title="このコードへのパーマリンク">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>...
&lt;<span class="w"> </span>HTTP/1.1<span class="w"> </span><span class="m">200</span><span class="w"> </span>OK
&lt;<span class="w"> </span>Date:<span class="w"> </span>Thu,<span class="w"> </span><span class="m">18</span><span class="w"> </span>Aug<span class="w"> </span><span class="m">2022</span><span class="w"> </span><span class="m">01</span>:49:13<span class="w"> </span>GMT
&lt;<span class="w"> </span>Server:<span class="w"> </span>Apache/2.4.37<span class="w"> </span><span class="o">(</span>Red<span class="w"> </span>Hat<span class="w"> </span>Enterprise<span class="w"> </span>Linux<span class="o">)</span><span class="w"> </span>mod_wsgi/4.7.1<span class="w"> </span>Python/3.9
&lt;<span class="w"> </span>Content-Length:<span class="w"> </span><span class="m">107</span>
&lt;<span class="w"> </span>Content-Type:<span class="w"> </span>application/json
&lt;
<span class="o">{</span>
<span class="w">  </span><span class="s2">&quot;data&quot;</span>:<span class="w"> </span>null,
<span class="w">  </span><span class="s2">&quot;message&quot;</span>:<span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span>,
<span class="w">  </span><span class="s2">&quot;result&quot;</span>:<span class="w"> </span><span class="s2">&quot;000-00000&quot;</span>,
<span class="w">  </span><span class="s2">&quot;ts&quot;</span>:<span class="w"> </span><span class="s2">&quot;2022-08-18T01:49:17.251Z&quot;</span>
<span class="o">}</span>
*<span class="w"> </span>Connection<span class="w"> </span><span class="c1">#0 to host platform-auth left intact</span>
</pre></div>
</div>
</div>
</li>
<li><p>失敗時の結果表示イメージ</p>
<div class="literal-block-wrapper docutils container" id="id13">
<div class="code-block-caption"><span class="caption-number">リスト 3.15 </span><span class="caption-text">実行結果(失敗時)</span><a class="headerlink" href="#id13" title="このコードへのパーマリンク">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>...
&lt;<span class="w"> </span>HTTP/1.1<span class="w"> </span><span class="m">400</span><span class="w"> </span>BAD<span class="w"> </span>REQUEST
&lt;<span class="w"> </span>Date:<span class="w"> </span>Thu,<span class="w"> </span><span class="m">18</span><span class="w"> </span>Aug<span class="w"> </span><span class="m">2022</span><span class="w"> </span><span class="m">05</span>:29:35<span class="w"> </span>GMT
&lt;<span class="w"> </span>Server:<span class="w"> </span>Apache/2.4.37<span class="w"> </span><span class="o">(</span>Red<span class="w"> </span>Hat<span class="w"> </span>Enterprise<span class="w"> </span>Linux<span class="o">)</span><span class="w"> </span>mod_wsgi/4.7.1<span class="w"> </span>Python/3.9
&lt;<span class="w"> </span>Content-Length:<span class="w"> </span><span class="m">252</span>
&lt;<span class="w"> </span>Connection:<span class="w"> </span>close
&lt;<span class="w"> </span>Content-Type:<span class="w"> </span>application/json
&lt;
<span class="o">{</span><span class="w"> </span><span class="o">[</span><span class="m">252</span><span class="w"> </span>bytes<span class="w"> </span>data<span class="o">]</span>
*<span class="w"> </span>Closing<span class="w"> </span>connection<span class="w"> </span><span class="m">0</span>
<span class="o">{</span>
<span class="w">  </span><span class="s2">&quot;data&quot;</span>:<span class="w"> </span>null,
<span class="w">  </span><span class="s2">&quot;message&quot;</span>:<span class="w"> </span><span class="s2">&quot;エラーメッセージ,</span>
<span class="s2">  &quot;</span>result<span class="s2">&quot;: &quot;</span>エラーコード<span class="s2">&quot;,</span>
<span class="s2">  &quot;</span>ts<span class="s2">&quot;: &quot;</span><span class="m">2022</span>-08-18T05:29:35.643Z<span class="s2">&quot;</span>
<span class="s2">}</span>
</pre></div>
</div>
</div>
</li>
</ul>
</li>
</ol>
</div><div aria-labelledby="tab-0-UmVzdCBBUEkg5Yip55So" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-UmVzdCBBUEkg5Yip55So" name="UmVzdCBBUEkg5Yip55So" role="tabpanel" tabindex="0"><ul class="simple">
<li><p>特徴</p></li>
</ul>
<div class="line-block">
<div class="line">Rest API は外部システムから Ansible Automation Controller の登録を行う際に有用です。</div>
</div>
<ul class="simple">
<li><p>登録方法</p></li>
</ul>
<ol class="arabic">
<li><p>SSH 鍵ファイルのエンコード</p>
<div class="line-block">
<div class="line">SSH 秘密鍵ファイルをアップロードする必要があるため、Base64 エンコードをします。</div>
</div>
<div class="literal-block-wrapper docutils container" id="id14">
<div class="code-block-caption"><span class="caption-number">リスト 3.16 </span><span class="caption-text">コマンド</span><a class="headerlink" href="#id14" title="このコードへのパーマリンク">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>MY_KEY=`base64 -w 0 my-aac-key.pem`
</pre></div>
</div>
</div>
</li>
<li><p>コマンド</p>
<div class="line-block">
<div class="line">オーガナイゼーションIDを <kbd class="kbd docutils literal notranslate">ORG_ID</kbd> に設定する必要があります。</div>
<div class="line">また、Basic 認証を利用するためには、システム管理者の認証情報を <kbd class="kbd docutils literal notranslate">BASE64_BASIC</kbd> に設定する必要があります。</div>
<div class="line">認証情報に関して、<a class="reference internal" href="../../installation/helm_on_kubernetes.html#create-system-manager"><span class="std std-ref">インストール時に登録した認証情報</span></a> で登録した内容となります。</div>
<div class="line">cURL を使用する場合は、下記のようにコマンドを実行します。</div>
</div>
<div class="line-block">
<div class="line">各パラメータについては下記を参照してください。</div>
</div>
<details>
  <summary>Ansible Automation Controller 登録時のパラメータ</summary><table class="filter-table docutils align-left" id="id15">
<caption><span class="caption-number">表 3.3 </span><span class="caption-text">Ansible Automation Controller 登録時のパラメータ</span><a class="headerlink" href="#id15" title="このテーブルへのパーマリンク">¶</a></caption>
<colgroup>
<col style="width: 30%" />
<col style="width: 40%" />
<col style="width: 30%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>パラメータ</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>設定値</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>input_limit_setting</p></td>
<td><div class="line-block">
<div class="line">Exastro IT Automation の画面上から <span class="menuselection">Ansible共通 ‣ インターフェース情報</span> (一部※) と <span class="menuselection">Ansible Automation Controller ホスト一覧</span> の編集可否を指定。</div>
<div class="line">▼ <span class="menuselection">Ansible共通 ‣ インターフェース情報</span> の入力制限がかかる項目:</div>
<div class="line">- <span class="menuselection">実行エンジン</span></div>
<div class="line">- <span class="menuselection">Ansible Automation Controller インターフェース</span></div>
<div class="line">- <span class="menuselection">Proxy</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><strong class="program">true</strong>: Exastro IT Automation の画面上から編集不可</div>
<div class="line"><strong class="program">false</strong>: Exastro IT Automation の画面上から編集可能</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>execution_engine_list</p></td>
<td><div class="line-block">
<div class="line"><span class="menuselection">Ansible共通 ‣ インターフェース情報 ‣ 実行エンジン</span> の選択肢に入れる項目を指定。</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">Ansible</kbd>-<kbd class="kbd docutils literal notranslate">Core</kbd></kbd>: コミュニティ版Ansible</div>
<div class="line"><kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">Ansible</kbd> <kbd class="kbd docutils literal notranslate">Automation</kbd> <kbd class="kbd docutils literal notranslate">Controller</kbd></kbd>: Red Hat Ansible Automation Controller</div>
<div class="line">上記のいずれか、または、その両方を指定。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>initial_data.ansible_automation_controller_host_list[*].file.ssh_private_key_file</p></td>
<td><p>Ansible Automation Controller に接続するために登録する秘密鍵ファイルを Base64 エンコードした値。</p></td>
<td><p>秘密鍵ファイルのBase64 エンコード文字列</p></td>
</tr>
<tr class="row-odd"><td><p>initial_data.ansible_automation_controller_host_list[*].parameter.host</p></td>
<td><p>Ansible Automation Controller のコントロールノードのホスト名を指定。</p></td>
<td><p>Ansible Automation Controller のコントロールノードのホスト名</p></td>
</tr>
<tr class="row-even"><td><p>initial_data.ansible_automation_controller_host_list[*].parameter.authentication_method</p></td>
<td><div class="line-block">
<div class="line">認証方式の選択</div>
<div class="line">Ansible Core または Ansible Automation Controller から作業対象の機器へ接続する際の認証方式を選択します。</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><kbd class="kbd docutils literal notranslate">パスワード認証</kbd> : ログインパスワードの管理で●の選択と、ログインパスワードの入力が必須です。</div>
<div class="line"><kbd class="kbd docutils literal notranslate">鍵認証(パスフレーズなし)</kbd> : SSH 秘密鍵ファイル(id_ras)のアップロードが必須です。</div>
<div class="line"><kbd class="kbd docutils literal notranslate">鍵認証(パスフレーズあり)</kbd> : SSH 秘密鍵ファイル(id_ras)のアップロードと、パスフレーズの入力が必須です。</div>
<div class="line"><kbd class="kbd docutils literal notranslate">鍵認証(鍵交換済み)</kbd> : SSH 秘密鍵ファイル(id_ras)のアップロードは必要ありません。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>initial_data.ansible_automation_controller_host_list[*].parameter.user</p></td>
<td><div class="line-block">
<div class="line">Ansible Automation Controller に SSH 接続する場合のユーザ名を指定。</div>
<div class="line">プロジェクトパス(/var/lib/awx/projects)への書き込み制限が必要</div>
</div>
</td>
<td><div class="line-block">
<div class="line">awx</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>initial_data.ansible_automation_controller_host_list[*].parameter.password</p></td>
<td><div class="line-block">
<div class="line">パスワード認証する場合のパスワードを指定。</div>
<div class="line">※ 最大長128バイト</div>
</div>
</td>
<td><p>任意の文字列</p></td>
</tr>
<tr class="row-odd"><td><p>initial_data.ansible_automation_controller_host_list[*].parameter.ssh_private_key_file</p></td>
<td><p>Ansible Automation Controller に接続するために登録する秘密鍵ファイルのファイル名。</p></td>
<td><p>秘密鍵ファイルのファイル名</p></td>
</tr>
<tr class="row-even"><td><p>initial_data.ansible_automation_controller_host_list[*].parameter.passphrase</p></td>
<td><div class="line-block">
<div class="line">SSH 秘密鍵ファイルにパスフレーズが設定されている場合、そのパスフレーズを指定。</div>
<div class="line">※ 最大長256バイト</div>
</div>
</td>
<td><p>パスフレーズ</p></td>
</tr>
<tr class="row-odd"><td><p>initial_data.ansible_automation_controller_host_list[*].parameter.isolated_tower</p></td>
<td><p>このノードが Ansible Automation Controller の Execution node であるかどうかを指定。</p></td>
<td><div class="line-block">
<div class="line"><kbd class="kbd docutils literal notranslate">True</kbd> : Execution node である場合。</div>
<div class="line"><kbd class="kbd docutils literal notranslate">False</kbd> : Execution node でない場合。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>initial_data.ansible_automation_controller_host_list[*].parameter.remarks</p></td>
<td><p>備考</p></td>
<td><p>任意の文字列</p></td>
</tr>
<tr class="row-odd"><td><p>initial_data.parameter.execution_engine</p></td>
<td><div class="line-block">
<div class="line">実行エンジンの指定</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">Ansible</kbd>-<kbd class="kbd docutils literal notranslate">Core</kbd></kbd>: コミュニティ版Ansible</div>
<div class="line"><kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">Ansible</kbd> <kbd class="kbd docutils literal notranslate">Automation</kbd> <kbd class="kbd docutils literal notranslate">Controller</kbd></kbd>: Red Hat Ansible Automation Controller</div>
<div class="line">上記のいずれかを指定。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>initial_data.parameter.representative_server</p></td>
<td><div class="line-block">
<div class="line">代表ホスト</div>
<div class="line"><span class="menuselection">Ansible Automation Controller ホスト一覧</span> に登録されいるホストの一覧より、 Exastro IT Automation と通信する Ansible Automation Controller のホストを選択します。</div>
<div class="line">※ 実行エンジンが Ansible Automation Controller の場合に入力必須</div>
</div>
</td>
<td><p>Ansible Automation Controller ホスト</p></td>
</tr>
<tr class="row-odd"><td><p>initial_data.parameter.ansible_automation_controller_protocol</p></td>
<td><div class="line-block">
<div class="line">Ansible Automation Controller サーバとの通信プロトコルを <kbd class="kbd docutils literal notranslate">http</kbd> か <kbd class="kbd docutils literal notranslate">https</kbd> のどちらかを入力します。</div>
<div class="line">通常は https です。</div>
<div class="line">※ 実行エンジンが Ansible Automation Controller の場合に入力必須</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><kbd class="kbd docutils literal notranslate">http</kbd></div>
<div class="line"><kbd class="kbd docutils literal notranslate">https</kbd></div>
<div class="line">上記のいずれか。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>initial_data.parameter.ansible_automation_controller_port</p></td>
<td><div class="line-block">
<div class="line">Ansible Automation Controller サーバの接続ポート(80/443)を入力します。通常は HTTPS(443)です。</div>
<div class="line">※ 実行エンジンが Ansible Automation Controller の場合に入力必須</div>
</div>
</td>
<td><p>ポート番号</p></td>
</tr>
<tr class="row-odd"><td><p>initial_data.parameter.organization_name</p></td>
<td><div class="line-block">
<div class="line">Ansible Automation Controller サーバに登録されている組織名を選択します。</div>
<div class="line">※ 実行エンジンが Ansible Core 以外の場合に入力必須</div>
</div>
</td>
<td><p>組織名の文字列</p></td>
</tr>
<tr class="row-even"><td><p>initial_data.parameter.authentication_token</p></td>
<td><div class="line-block">
<div class="line">Exastro IT Automation から Ansible Automation Controller サーバに接続するユーザーの認証トークンを入力します。</div>
<div class="line">※ 実行エンジンが Ansible Automation Controller の場合に入力必須</div>
</div>
</td>
<td><p>認証トークン文字列</p></td>
</tr>
<tr class="row-odd"><td><p>initial_data.parameter.delete_runtime_data</p></td>
<td><div class="line-block">
<div class="line">作業実行時に Exastro IT Automation と Ansible Automation Controller 内に一時的に生成されるデータリソースを作業終了後に削するかを選択します。</div>
<div class="line">※ 実行エンジンが Ansible Automation Controller の場合に入力必須</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><kbd class="kbd docutils literal notranslate">True</kbd> : 作業終了時にリソースを削除する</div>
<div class="line"><kbd class="kbd docutils literal notranslate">False</kbd> : 作業終了時にリソースを削除しない</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>initial_data.parameter.proxy_address</p></td>
<td><div class="line-block">
<div class="line">Exastro IT Automation がプロキシ環境下にある場合、Ansible/ Ansible Automation Controller サーバまでの疎通のために設定が必要な場合があります。</div>
<div class="line">プロキシサーバのURLが <a class="reference external" href="http://proxy.example.com:8080">http://proxy.example.com:8080</a> の場合、<kbd class="kbd docutils literal notranslate">http://proxy.example.com</kbd> を入力します。</div>
<div class="line">※ 最大128バイト</div>
</div>
</td>
<td><p>プロキシサーバのURL</p></td>
</tr>
<tr class="row-odd"><td><p>initial_data.parameter.proxy_port</p></td>
<td><div class="line-block">
<div class="line">Exastro IT Automation がプロキシ環境下にある場合、Ansible/ Ansible Automation Controller サーバまでの疎通のために設定が必要な場合があります。</div>
<div class="line">プロキシサーバのURLが <a class="reference external" href="http://proxy.example.com:8080">http://proxy.example.com:8080</a> の場合、<kbd class="kbd docutils literal notranslate">8080</kbd> を入力します。</div>
</div>
</td>
<td><p>プロキシサーバのポート番号</p></td>
</tr>
</tbody>
</table>
</details><div class="literal-block-wrapper docutils container" id="id16">
<div class="code-block-caption"><span class="caption-number">リスト 3.17 </span><span class="caption-text">コマンド</span><a class="headerlink" href="#id16" title="このコードへのパーマリンク">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">ORG_ID</span><span class="o">=</span>org001
<span class="nv">BASE64_BASIC</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;KEYCLOAK_USER:KEYCLOAK_PASSWORD&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="k">)</span>
<span class="nv">BASE_URL</span><span class="o">=</span>http://exastro-suite-mng.example.local

curl<span class="w"> </span>-X<span class="w"> </span><span class="s1">&#39;POST&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="s2">&quot;http://</span><span class="si">${</span><span class="nv">BASE_URL</span><span class="si">}</span><span class="s2">/api/ita/</span><span class="si">${</span><span class="nv">ORG_ID</span><span class="si">}</span><span class="s2">/initial-settings/ansible/&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s1">&#39;accept: application/json&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Basic </span><span class="si">${</span><span class="nv">BASE64_BASIC</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s1">&#39;Content-Type: application/json&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">        &quot;input_limit_setting&quot;: true,</span>
<span class="s1">        &quot;execution_engine_list&quot;: [</span>
<span class="s1">          &quot;Ansible Automation Controller&quot;</span>
<span class="s1">        ],</span>
<span class="s1">        &quot;initial_data&quot;: {</span>
<span class="s1">          &quot;ansible_automation_controller_host_list&quot;: [</span>
<span class="s1">            {</span>
<span class="s1">              &quot;file&quot;: {</span>
<span class="s1">                &quot;ssh_private_key_file&quot;: &quot;LS0tLS1CRUdJTiBPUEVOU1NIIFBSSVZBVEUgS0VZLS0tLS0KYjNCbGJuTnphQzFyWlhrdGRqRUFBQUFBQkc1dmJtVUFBQUFFYm05dVpRQUFBQUFBQUFBQkFBQUJsd0FBQUFkemMyZ3RjbgpOaEFBQUFBd0VBQVFBQUFZRUF0V0ZvVVA5ZkZSRlhUTTV0U2s4cmU1dTVEVjNqclF3VVd5d2swMkwrZ0tkNElsOFQ4TnBkCk40Z3ZGVkMxM1VueGNxc1pxVWdEWk41NnphSnMrdThQcTBlVjl2R0dkWmZDcU11OHRrbzh5WUw2MGQ2VUVoVXFOVVJkb1UKSEJ3bngzbjZidlNWMVE0em56V0JBNVBqOFl3SENiL0swVGFEMndvMkRkbFhqTXhhTlpXTXlpRFVMbE1pSk02VFdCU0lYMwo2emE5ZnI2cGFmak5Vc0hBTk9YSTdGbUFQcC9Jcy80TmtJVkhZN2M1UkJkUTUvNWgrTCtxRmlVazhKbE9vcFdnMjJOWWlXCkpKUGM0U09iTWxtRUY1OEdMdloxZTlCS0FvaXEvdWIvVmlhZG9hRFlyTzlEM0U3UW1NTldWMjNNMnMyN2tnS0ZKcFJJSUMKbmllZlJyaTdkOVhEYldoclBFY1FlRUMyZnNrRzVyY3Q0RFhrQUtVVCtSTkdwMll6bWZqSHlHNkRPWkJIa1RCNnJ5OVF3SgpRaFpFTjEvM3k2K0Q1V1BpbWlxeVFBNmtXdnZYZUtHWkhzZEhLdG5QaGZra1EyUWlteFgyWFRHaGZwdjRSUkUzZWNGUmxRClQvenRLeWg5enIzWmd4UU1nWHgwdEJ5V2dZSUJwZVZHa1dFTTVkeTNBQUFGa1BlMkRlYjN0ZzNtQUFBQUIzTnphQzF5YzIKRUFBQUdCQUxWaGFGRC9YeFVSVjB6T2JVcFBLM3VidVExZDQ2ME1GRnNzSk5OaS9vQ25lQ0pmRS9EYVhUZUlMeFZRdGQxSgo4WEtyR2FsSUEyVGVlczJpYlBydkQ2dEhsZmJ4aG5XWHdxakx2TFpLUE1tQyt0SGVsQklWS2pWRVhhRkJ3Y0o4ZDUrbTcwCmxkVU9NNTgxZ1FPVDQvR01Cd20veXRFMmc5c0tOZzNaVjR6TVdqV1ZqTW9nMUM1VElpVE9rMWdVaUY5K3Mydlg2K3FXbjQKelZMQndEVGx5T3haZ0Q2ZnlMUCtEWkNGUjJPM09VUVhVT2YrWWZpL3FoWWxKUENaVHFLVm9OdGpXSWxpU1QzT0VqbXpKWgpoQmVmQmk3MmRYdlFTZ0tJcXY3bS8xWW1uYUdnMkt6dlE5eE8wSmpEVmxkdHpOck51NUlDaFNhVVNDQXA0bm4wYTR1M2ZWCncyMW9henhIRUhoQXRuN0pCdWEzTGVBMTVBQ2xFL2tUUnFkbU01bjR4OGh1Z3ptUVI1RXdlcTh2VU1DVUlXUkRkZjk4dXYKZytWajRwb3Fza0FPcEZyNzEzaWhtUjdIUnlyWno0WDVKRU5rSXBzVjlsMHhvWDZiK0VVUk4zbkJVWlVFLzg3U3NvZmM2OQoyWU1VRElGOGRMUWNsb0dDQWFYbFJwRmhET1hjdHdBQUFBTUJBQUVBQUFHQkFMRHVJTzBKL3YwMUdqeXhETWswNjB5N2ZjCnM5TUErb3ZkNmw5QkpEK2RFVUM4c3poZWNuaTFEVlJtQjdoN3dpR2lYcUk3RU9yMGpoQVZmQVBxQ1ZQR3F1L09tVGRyOFUKMSswQ09NWjFLbEREdE5tdVRqQkpkdy9ZN2FDVTNXWlROZm1GeE51QzdKbUsrUWFKWk4yRWZTZVRjWVlNYXViL2JtUWc1RwpXZkhka1kyOW9VVzJ1bU9wOHArRzV4SS9qVHZpQXpHS3dmWG5FaUkxKzc0anQzZndTVzFkUEExKzVFUDRVZmphRUdwUlQzCnpaTlFnTTgrWDdNVWJyRklTdjJzQ0VWSU54cGJDSE9iQkRZcTdodUljeDdKUVEvcW5EMVJGdFhBa3d4M1ZkMFF4elZUTDUKZXF6ci9jc3h6S3l1M08yVE5weWVodE1SWVB6M2dXZ2xieFI1SStObWl1VGlTQWFHa1o2OXJqblY0bVNmL25xUnJwUWRpeAozS1E1bUZldVNUUFdEdXZQNFdWNlJybzBPajRjalZnNTlGNHVWM05xQmpvMFpXYmt1QnhZeDRBK2hsZjcwMmdMLzVMZTBPCllTc1dFS0U5aFhueHZ5b0NBUTBCLy9meDFnaHkxY2xQWi9JR3FpWDYwUEQrY0FmTnFWNmt6aFo5WmZmQmVOZ2x3NThRQUEKQU1FQTBqbVF4VVc2WW9ZRnovUFg5aXgrNEd3VXh4WWFTdlVYRDJHZGt4cGtkYS9EV3lKUlJFd1FjTzhPQTdhWUFhV0hxSwp1T1ZCWVJlY3h0Z01SbzUreUNpZjVoNE9HNzVyVEtSQ0NRLy9Td2hyS25iQjFoOVJ0Q2dWNjlSd0tMSUhxcXo0dGQ0V20wCkw0NmFtditjd0ZrVVdxOFRtdzNkR1NlV3AydURQcjVxSjVGWDlEdmZRWUNKSEVkNThnN2lESXdzMUd3VExKaTJ3L0J1QlEKbzB2MUw4dGo0eG1MTUxpcW1zdDZLRHM3cHBlOGpJYTgycHVTSUJ1ZWJ5Y3pKdXljcmNBQUFBd1FEbU5SV25qcisxWmJSdgpPRjJVT2hGQ2I2UVlpQkFsTzVuWVZQUnQ2amhMWmdvMjlkUVUwUmRnYzNObmtOdzY1ZFpQbnZVMTlaamkzcFBlRnVQczJQCnEyaDg1aFNCK3VRR3JodEovRGM2MU1ZS2k5cjkxQmtvd0ZHSDR3YW9mSUsyYmF1V2VFMGg3UFFmajhrSzZVbndLbnpPSTcKc1o2anJTZStxaHQwMzkxUzhTb2F1bkhnMXNsOTRYS092bG1RQUpQMHNuS2VMcGIyalZIR0ZTR0JRdG1GQUh2aXV6Zm5nUgpGc3hrd2ROSU1ERGxLNmxVMnFhbkppL0NBM0VOQldDLzhBQUFEQkFNbXoyUkVEbllkSjM0N2prWWFDNzNHdGtjWDZDN0NxCjZ6cGRXQkZ6Zjd0NkhJbzJMdUlPenVFa2IxV0VjOFZibTBHbTA1YkZ4YnFEYjF2OWpJRmErTG9qTHVOUmFoSEZHVFRRUDYKTk9DMzA2SDd2TWgwMStNUVJNaERKYW9GRlRRVy9uSVBIQldwcDVJNzFVN0FNa0d6cXJoWVU5dlVNSXBNS2taQUQyYWF3dwpreUp6eFZzTFhUQXhrT3BVU3lWZmJsZVBKZXJpVmIydmVXbm5RUmRnRm02empSeXpSTXlYODFkaldzelNDTVZUeWI2YW9GCjdBYjZPZzlib0lnRmVQU1FBQUFCTnpjR2hwYm5oQU1qWmxNR05pWkRrM05UZGxBUUlEQkFVRwotLS0tLUVORCBPUEVOU1NIIFBSSVZBVEUgS0VZLS0tLS0K&quot;</span>
<span class="s1">              },</span>
<span class="s1">              &quot;parameter&quot;: {</span>
<span class="s1">                &quot;host&quot;: &quot;aap.example.com&quot;,</span>
<span class="s1">                &quot;authentication_method&quot;: &quot;鍵認証(パスフレーズなし)&quot;,</span>
<span class="s1">                &quot;user&quot;: &quot;awx&quot;,</span>
<span class="s1">                &quot;password&quot;: null,</span>
<span class="s1">                &quot;ssh_private_key_file&quot;: &quot;aap_id_rsa&quot;,</span>
<span class="s1">                &quot;passphrase&quot;: null,</span>
<span class="s1">                &quot;isolated_tower&quot;: &quot;False&quot;,</span>
<span class="s1">                &quot;remarks&quot;: null</span>
<span class="s1">              }</span>
<span class="s1">            }</span>
<span class="s1">          ],</span>
<span class="s1">          &quot;interface_info_ansible&quot;: {</span>
<span class="s1">            &quot;parameter&quot;: {</span>
<span class="s1">              &quot;execution_engine&quot;: &quot;Ansible Automation Controller&quot;,</span>
<span class="s1">              &quot;representative_server&quot;: &quot;aap.example.com&quot;,</span>
<span class="s1">              &quot;ansible_automation_controller_protocol&quot;: &quot;https&quot;,</span>
<span class="s1">              &quot;ansible_automation_controller_port&quot;: &quot;443&quot;,</span>
<span class="s1">              &quot;organization_name&quot;: null,</span>
<span class="s1">              &quot;authentication_token&quot;: &quot;LwWw3dwoHGx19ZhP1YQZU0JdZzobFv&quot;,</span>
<span class="s1">              &quot;delete_runtime_data&quot;: &quot;True&quot;,</span>
<span class="s1">              &quot;proxy_address&quot;: null,</span>
<span class="s1">              &quot;proxy_port&quot;: null</span>
<span class="s1">            }</span>
<span class="s1">          }</span>
<span class="s1">        }</span>
<span class="s1">      }&#39;</span>
</pre></div>
</div>
</div>
</li>
</ol>
</div></div>
</section>
<section id="ansible-automation-contoller">
<h3><span class="section-number">3.2.3. </span>Ansible Automation Contoller 連携の確認<a class="headerlink" href="#ansible-automation-contoller" title="この見出しへのパーマリンク">¶</a></h3>
<ol class="arabic simple">
<li><p>オーガナイゼーション作成結果を確認します。</p></li>
</ol>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-6Kit5a6a44OV44Kh44Kk44Or44Go44K544Kv44Oq44OX44OI5Yip55So" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-1-6Kit5a6a44OV44Kh44Kk44Or44Go44K544Kv44Oq44OX44OI5Yip55So" name="6Kit5a6a44OV44Kh44Kk44Or44Go44K544Kv44Oq44OX44OI5Yip55So" role="tab" tabindex="0">設定ファイルとスクリプト利用</button><button aria-controls="panel-1-UmVzdCBBUEkg5Yip55So" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-UmVzdCBBUEkg5Yip55So" name="UmVzdCBBUEkg5Yip55So" role="tab" tabindex="-1">Rest API 利用</button></div><div aria-labelledby="tab-1-6Kit5a6a44OV44Kh44Kk44Or44Go44K544Kv44Oq44OX44OI5Yip55So" class="sphinx-tabs-panel group-tab" id="panel-1-6Kit5a6a44OV44Kh44Kk44Or44Go44K544Kv44Oq44OX44OI5Yip55So" name="6Kit5a6a44OV44Kh44Kk44Or44Go44K544Kv44Oq44OX44OI5Yip55So" role="tabpanel" tabindex="0"><div class="literal-block-wrapper docutils container" id="id17">
<div class="code-block-caption"><span class="caption-number">リスト 3.18 </span><span class="caption-text">コマンド</span><a class="headerlink" href="#id17" title="このコードへのパーマリンク">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./exastro-platform/tools/get-initial-settings-ansible.sh

organization<span class="w"> </span>id<span class="w"> </span>:<span class="w"> </span>INPUT-ORGANIZATION-ID-TO-SET<span class="w"> </span><span class="c1"># 設定先のオーガナイゼーションID</span>

your<span class="w"> </span>username<span class="w"> </span>:<span class="w"> </span>INPUT-YOUR-USERNAME<span class="w"> </span><span class="c1"># システム管理者のユーザ名を入力します</span>
your<span class="w"> </span>password<span class="w"> </span>:<span class="w"> </span>INPUT-USER-PASSWORD<span class="w"> </span><span class="c1"># システム管理者のパスワードを入力します</span>
</pre></div>
</div>
</div>
<ul>
<li><p>結果表示</p>
<p>resultが”000-00000”が、 Ansible Automation Controller の作成に成功したことを示しています。</p>
<div class="literal-block-wrapper docutils container" id="id18">
<div class="code-block-caption"><span class="caption-number">リスト 3.19 </span><span class="caption-text">実行結果(成功例)</span><a class="headerlink" href="#id18" title="このコードへのパーマリンク">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;execution_engine_list&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="s2">&quot;Ansible Automation Controller&quot;</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;initial_data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;ansible_automation_controller_host_list&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;file&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;ssh_private_key_file&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LS0tLS1CRUdJTiBPUEVOU1NIIFBSSVZBVEUgS0VZLS0tLS0KYjNCbGJuTnphQzFyWlhrdGRqRUFBQUFBQkc1dmJtVUFBQUFFYm05dVpRQUFBQUFBQUFBQkFBQUJsd0FBQUFkemMyZ3RjbgpOaEFBQUFBd0VBQVFBQUFZRUF0V0ZvVVA5ZkZSRlhUTTV0U2s4cmU1dTVEVjNqclF3VVd5d2swMkwrZ0tkNElsOFQ4TnBkCk40Z3ZGVkMxM1VueGNxc1pxVWdEWk41NnphSnMrdThQcTBlVjl2R0dkWmZDcU11OHRrbzh5WUw2MGQ2VUVoVXFOVVJkb1UKSEJ3bngzbjZidlNWMVE0em56V0JBNVBqOFl3SENiL0swVGFEMndvMkRkbFhqTXhhTlpXTXlpRFVMbE1pSk02VFdCU0lYMwo2emE5ZnI2cGFmak5Vc0hBTk9YSTdGbUFQcC9Jcy80TmtJVkhZN2M1UkJkUTUvNWgrTCtxRmlVazhKbE9vcFdnMjJOWWlXCkpKUGM0U09iTWxtRUY1OEdMdloxZTlCS0FvaXEvdWIvVmlhZG9hRFlyTzlEM0U3UW1NTldWMjNNMnMyN2tnS0ZKcFJJSUMKbmllZlJyaTdkOVhEYldoclBFY1FlRUMyZnNrRzVyY3Q0RFhrQUtVVCtSTkdwMll6bWZqSHlHNkRPWkJIa1RCNnJ5OVF3SgpRaFpFTjEvM3k2K0Q1V1BpbWlxeVFBNmtXdnZYZUtHWkhzZEhLdG5QaGZra1EyUWlteFgyWFRHaGZwdjRSUkUzZWNGUmxRClQvenRLeWg5enIzWmd4UU1nWHgwdEJ5V2dZSUJwZVZHa1dFTTVkeTNBQUFGa1BlMkRlYjN0ZzNtQUFBQUIzTnphQzF5YzIKRUFBQUdCQUxWaGFGRC9YeFVSVjB6T2JVcFBLM3VidVExZDQ2ME1GRnNzSk5OaS9vQ25lQ0pmRS9EYVhUZUlMeFZRdGQxSgo4WEtyR2FsSUEyVGVlczJpYlBydkQ2dEhsZmJ4aG5XWHdxakx2TFpLUE1tQyt0SGVsQklWS2pWRVhhRkJ3Y0o4ZDUrbTcwCmxkVU9NNTgxZ1FPVDQvR01Cd20veXRFMmc5c0tOZzNaVjR6TVdqV1ZqTW9nMUM1VElpVE9rMWdVaUY5K3Mydlg2K3FXbjQKelZMQndEVGx5T3haZ0Q2ZnlMUCtEWkNGUjJPM09VUVhVT2YrWWZpL3FoWWxKUENaVHFLVm9OdGpXSWxpU1QzT0VqbXpKWgpoQmVmQmk3MmRYdlFTZ0tJcXY3bS8xWW1uYUdnMkt6dlE5eE8wSmpEVmxkdHpOck51NUlDaFNhVVNDQXA0bm4wYTR1M2ZWCncyMW9henhIRUhoQXRuN0pCdWEzTGVBMTVBQ2xFL2tUUnFkbU01bjR4OGh1Z3ptUVI1RXdlcTh2VU1DVUlXUkRkZjk4dXYKZytWajRwb3Fza0FPcEZyNzEzaWhtUjdIUnlyWno0WDVKRU5rSXBzVjlsMHhvWDZiK0VVUk4zbkJVWlVFLzg3U3NvZmM2OQoyWU1VRElGOGRMUWNsb0dDQWFYbFJwRmhET1hjdHdBQUFBTUJBQUVBQUFHQkFMRHVJTzBKL3YwMUdqeXhETWswNjB5N2ZjCnM5TUErb3ZkNmw5QkpEK2RFVUM4c3poZWNuaTFEVlJtQjdoN3dpR2lYcUk3RU9yMGpoQVZmQVBxQ1ZQR3F1L09tVGRyOFUKMSswQ09NWjFLbEREdE5tdVRqQkpkdy9ZN2FDVTNXWlROZm1GeE51QzdKbUsrUWFKWk4yRWZTZVRjWVlNYXViL2JtUWc1RwpXZkhka1kyOW9VVzJ1bU9wOHArRzV4SS9qVHZpQXpHS3dmWG5FaUkxKzc0anQzZndTVzFkUEExKzVFUDRVZmphRUdwUlQzCnpaTlFnTTgrWDdNVWJyRklTdjJzQ0VWSU54cGJDSE9iQkRZcTdodUljeDdKUVEvcW5EMVJGdFhBa3d4M1ZkMFF4elZUTDUKZXF6ci9jc3h6S3l1M08yVE5weWVodE1SWVB6M2dXZ2xieFI1SStObWl1VGlTQWFHa1o2OXJqblY0bVNmL25xUnJwUWRpeAozS1E1bUZldVNUUFdEdXZQNFdWNlJybzBPajRjalZnNTlGNHVWM05xQmpvMFpXYmt1QnhZeDRBK2hsZjcwMmdMLzVMZTBPCllTc1dFS0U5aFhueHZ5b0NBUTBCLy9meDFnaHkxY2xQWi9JR3FpWDYwUEQrY0FmTnFWNmt6aFo5WmZmQmVOZ2x3NThRQUEKQU1FQTBqbVF4VVc2WW9ZRnovUFg5aXgrNEd3VXh4WWFTdlVYRDJHZGt4cGtkYS9EV3lKUlJFd1FjTzhPQTdhWUFhV0hxSwp1T1ZCWVJlY3h0Z01SbzUreUNpZjVoNE9HNzVyVEtSQ0NRLy9Td2hyS25iQjFoOVJ0Q2dWNjlSd0tMSUhxcXo0dGQ0V20wCkw0NmFtditjd0ZrVVdxOFRtdzNkR1NlV3AydURQcjVxSjVGWDlEdmZRWUNKSEVkNThnN2lESXdzMUd3VExKaTJ3L0J1QlEKbzB2MUw4dGo0eG1MTUxpcW1zdDZLRHM3cHBlOGpJYTgycHVTSUJ1ZWJ5Y3pKdXljcmNBQUFBd1FEbU5SV25qcisxWmJSdgpPRjJVT2hGQ2I2UVlpQkFsTzVuWVZQUnQ2amhMWmdvMjlkUVUwUmRnYzNObmtOdzY1ZFpQbnZVMTlaamkzcFBlRnVQczJQCnEyaDg1aFNCK3VRR3JodEovRGM2MU1ZS2k5cjkxQmtvd0ZHSDR3YW9mSUsyYmF1V2VFMGg3UFFmajhrSzZVbndLbnpPSTcKc1o2anJTZStxaHQwMzkxUzhTb2F1bkhnMXNsOTRYS092bG1RQUpQMHNuS2VMcGIyalZIR0ZTR0JRdG1GQUh2aXV6Zm5nUgpGc3hrd2ROSU1ERGxLNmxVMnFhbkppL0NBM0VOQldDLzhBQUFEQkFNbXoyUkVEbllkSjM0N2prWWFDNzNHdGtjWDZDN0NxCjZ6cGRXQkZ6Zjd0NkhJbzJMdUlPenVFa2IxV0VjOFZibTBHbTA1YkZ4YnFEYjF2OWpJRmErTG9qTHVOUmFoSEZHVFRRUDYKTk9DMzA2SDd2TWgwMStNUVJNaERKYW9GRlRRVy9uSVBIQldwcDVJNzFVN0FNa0d6cXJoWVU5dlVNSXBNS2taQUQyYWF3dwpreUp6eFZzTFhUQXhrT3BVU3lWZmJsZVBKZXJpVmIydmVXbm5RUmRnRm02empSeXpSTXlYODFkaldzelNDTVZUeWI2YW9GCjdBYjZPZzlib0lnRmVQU1FBQUFCTnpjR2hwYm5oQU1qWmxNR05pWkRrM05UZGxBUUlEQkFVRwotLS0tLUVORCBPUEVOU1NIIFBSSVZBVEUgS0VZLS0tLS0K&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;parameter&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;authentication_method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;\u9375\u8a8d\u8a3c(\u30d1\u30b9\u30d5\u30ec\u30fc\u30ba\u306a\u3057)&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;host&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aap.example.com&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;isolated_tower&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;False&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;passphrase&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;password&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;remarks&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;ssh_private_key_file&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aap_id_rsa&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;user&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;awx&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;interface_info_ansible&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;parameter&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;ansible_automation_controller_port&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;443&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;ansible_automation_controller_protocol&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;authentication_token&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LwWw3dwoHGx19ZhP1YQZU0JdZzobFv&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;delete_runtime_data&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;execution_engine&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Ansible Automation Controller&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;organization_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;proxy_address&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;proxy_port&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;representative_server&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aap.example.com&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;input_limit_setting&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;result&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;000-00000&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;ts&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2023-02-03T14:47:10.185Z&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</li>
<li><p>失敗時の結果表示イメージ</p>
<div class="literal-block-wrapper docutils container" id="id19">
<div class="code-block-caption"><span class="caption-number">リスト 3.20 </span><span class="caption-text">実行結果(失敗例)</span><a class="headerlink" href="#id19" title="このコードへのパーマリンク">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>...
&lt;<span class="w"> </span>HTTP/1.1<span class="w"> </span><span class="m">400</span><span class="w"> </span>BAD<span class="w"> </span>REQUEST
&lt;<span class="w"> </span>Date:<span class="w"> </span>Thu,<span class="w"> </span><span class="m">18</span><span class="w"> </span>Aug<span class="w"> </span><span class="m">2022</span><span class="w"> </span><span class="m">05</span>:29:35<span class="w"> </span>GMT
&lt;<span class="w"> </span>Server:<span class="w"> </span>Apache/2.4.37<span class="w"> </span><span class="o">(</span>Red<span class="w"> </span>Hat<span class="w"> </span>Enterprise<span class="w"> </span>Linux<span class="o">)</span><span class="w"> </span>mod_wsgi/4.7.1<span class="w"> </span>Python/3.9
&lt;<span class="w"> </span>Content-Length:<span class="w"> </span><span class="m">252</span>
&lt;<span class="w"> </span>Connection:<span class="w"> </span>close
&lt;<span class="w"> </span>Content-Type:<span class="w"> </span>application/json
&lt;
<span class="o">{</span><span class="w"> </span><span class="o">[</span><span class="m">252</span><span class="w"> </span>bytes<span class="w"> </span>data<span class="o">]</span>
*<span class="w"> </span>Closing<span class="w"> </span>connection<span class="w"> </span><span class="m">0</span>
<span class="o">{</span>
<span class="w">  </span><span class="s2">&quot;data&quot;</span>:<span class="w"> </span>null,
<span class="w">  </span><span class="s2">&quot;message&quot;</span>:<span class="w"> </span><span class="s2">&quot;エラーメッセージ,</span>
<span class="s2">  &quot;</span>result<span class="s2">&quot;: &quot;</span>エラーコード<span class="s2">&quot;,</span>
<span class="s2">  &quot;</span>ts<span class="s2">&quot;: &quot;</span><span class="m">2022</span>-08-18T05:29:35.643Z<span class="s2">&quot;</span>
<span class="s2">}</span>
</pre></div>
</div>
</div>
</li>
</ul>
</div><div aria-labelledby="tab-1-UmVzdCBBUEkg5Yip55So" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-UmVzdCBBUEkg5Yip55So" name="UmVzdCBBUEkg5Yip55So" role="tabpanel" tabindex="0"><div class="literal-block-wrapper docutils container" id="id20">
<div class="code-block-caption"><span class="caption-number">リスト 3.21 </span><span class="caption-text">コマンド</span><a class="headerlink" href="#id20" title="このコードへのパーマリンク">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-X<span class="w"> </span><span class="s1">&#39;GET&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="s1">&#39;http://exastro-suite-mng.example.local/api/ita/org001/initial-settings/ansible/&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-H<span class="w"> </span><span class="s1">&#39;accept: application/json&#39;</span>
</pre></div>
</div>
</div>
<ul>
<li><p>結果表示</p>
<p>resultが”000-00000”が、 Ansible Automation Controller の作成に成功したことを示しています。</p>
<div class="literal-block-wrapper docutils container" id="id21">
<div class="code-block-caption"><span class="caption-number">リスト 3.22 </span><span class="caption-text">実行結果(成功例)</span><a class="headerlink" href="#id21" title="このコードへのパーマリンク">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;execution_engine_list&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="s2">&quot;Ansible Automation Controller&quot;</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;initial_data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;ansible_automation_controller_host_list&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;file&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;ssh_private_key_file&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LS0tLS1CRUdJTiBPUEVOU1NIIFBSSVZBVEUgS0VZLS0tLS0KYjNCbGJuTnphQzFyWlhrdGRqRUFBQUFBQkc1dmJtVUFBQUFFYm05dVpRQUFBQUFBQUFBQkFBQUJsd0FBQUFkemMyZ3RjbgpOaEFBQUFBd0VBQVFBQUFZRUF0V0ZvVVA5ZkZSRlhUTTV0U2s4cmU1dTVEVjNqclF3VVd5d2swMkwrZ0tkNElsOFQ4TnBkCk40Z3ZGVkMxM1VueGNxc1pxVWdEWk41NnphSnMrdThQcTBlVjl2R0dkWmZDcU11OHRrbzh5WUw2MGQ2VUVoVXFOVVJkb1UKSEJ3bngzbjZidlNWMVE0em56V0JBNVBqOFl3SENiL0swVGFEMndvMkRkbFhqTXhhTlpXTXlpRFVMbE1pSk02VFdCU0lYMwo2emE5ZnI2cGFmak5Vc0hBTk9YSTdGbUFQcC9Jcy80TmtJVkhZN2M1UkJkUTUvNWgrTCtxRmlVazhKbE9vcFdnMjJOWWlXCkpKUGM0U09iTWxtRUY1OEdMdloxZTlCS0FvaXEvdWIvVmlhZG9hRFlyTzlEM0U3UW1NTldWMjNNMnMyN2tnS0ZKcFJJSUMKbmllZlJyaTdkOVhEYldoclBFY1FlRUMyZnNrRzVyY3Q0RFhrQUtVVCtSTkdwMll6bWZqSHlHNkRPWkJIa1RCNnJ5OVF3SgpRaFpFTjEvM3k2K0Q1V1BpbWlxeVFBNmtXdnZYZUtHWkhzZEhLdG5QaGZra1EyUWlteFgyWFRHaGZwdjRSUkUzZWNGUmxRClQvenRLeWg5enIzWmd4UU1nWHgwdEJ5V2dZSUJwZVZHa1dFTTVkeTNBQUFGa1BlMkRlYjN0ZzNtQUFBQUIzTnphQzF5YzIKRUFBQUdCQUxWaGFGRC9YeFVSVjB6T2JVcFBLM3VidVExZDQ2ME1GRnNzSk5OaS9vQ25lQ0pmRS9EYVhUZUlMeFZRdGQxSgo4WEtyR2FsSUEyVGVlczJpYlBydkQ2dEhsZmJ4aG5XWHdxakx2TFpLUE1tQyt0SGVsQklWS2pWRVhhRkJ3Y0o4ZDUrbTcwCmxkVU9NNTgxZ1FPVDQvR01Cd20veXRFMmc5c0tOZzNaVjR6TVdqV1ZqTW9nMUM1VElpVE9rMWdVaUY5K3Mydlg2K3FXbjQKelZMQndEVGx5T3haZ0Q2ZnlMUCtEWkNGUjJPM09VUVhVT2YrWWZpL3FoWWxKUENaVHFLVm9OdGpXSWxpU1QzT0VqbXpKWgpoQmVmQmk3MmRYdlFTZ0tJcXY3bS8xWW1uYUdnMkt6dlE5eE8wSmpEVmxkdHpOck51NUlDaFNhVVNDQXA0bm4wYTR1M2ZWCncyMW9henhIRUhoQXRuN0pCdWEzTGVBMTVBQ2xFL2tUUnFkbU01bjR4OGh1Z3ptUVI1RXdlcTh2VU1DVUlXUkRkZjk4dXYKZytWajRwb3Fza0FPcEZyNzEzaWhtUjdIUnlyWno0WDVKRU5rSXBzVjlsMHhvWDZiK0VVUk4zbkJVWlVFLzg3U3NvZmM2OQoyWU1VRElGOGRMUWNsb0dDQWFYbFJwRmhET1hjdHdBQUFBTUJBQUVBQUFHQkFMRHVJTzBKL3YwMUdqeXhETWswNjB5N2ZjCnM5TUErb3ZkNmw5QkpEK2RFVUM4c3poZWNuaTFEVlJtQjdoN3dpR2lYcUk3RU9yMGpoQVZmQVBxQ1ZQR3F1L09tVGRyOFUKMSswQ09NWjFLbEREdE5tdVRqQkpkdy9ZN2FDVTNXWlROZm1GeE51QzdKbUsrUWFKWk4yRWZTZVRjWVlNYXViL2JtUWc1RwpXZkhka1kyOW9VVzJ1bU9wOHArRzV4SS9qVHZpQXpHS3dmWG5FaUkxKzc0anQzZndTVzFkUEExKzVFUDRVZmphRUdwUlQzCnpaTlFnTTgrWDdNVWJyRklTdjJzQ0VWSU54cGJDSE9iQkRZcTdodUljeDdKUVEvcW5EMVJGdFhBa3d4M1ZkMFF4elZUTDUKZXF6ci9jc3h6S3l1M08yVE5weWVodE1SWVB6M2dXZ2xieFI1SStObWl1VGlTQWFHa1o2OXJqblY0bVNmL25xUnJwUWRpeAozS1E1bUZldVNUUFdEdXZQNFdWNlJybzBPajRjalZnNTlGNHVWM05xQmpvMFpXYmt1QnhZeDRBK2hsZjcwMmdMLzVMZTBPCllTc1dFS0U5aFhueHZ5b0NBUTBCLy9meDFnaHkxY2xQWi9JR3FpWDYwUEQrY0FmTnFWNmt6aFo5WmZmQmVOZ2x3NThRQUEKQU1FQTBqbVF4VVc2WW9ZRnovUFg5aXgrNEd3VXh4WWFTdlVYRDJHZGt4cGtkYS9EV3lKUlJFd1FjTzhPQTdhWUFhV0hxSwp1T1ZCWVJlY3h0Z01SbzUreUNpZjVoNE9HNzVyVEtSQ0NRLy9Td2hyS25iQjFoOVJ0Q2dWNjlSd0tMSUhxcXo0dGQ0V20wCkw0NmFtditjd0ZrVVdxOFRtdzNkR1NlV3AydURQcjVxSjVGWDlEdmZRWUNKSEVkNThnN2lESXdzMUd3VExKaTJ3L0J1QlEKbzB2MUw4dGo0eG1MTUxpcW1zdDZLRHM3cHBlOGpJYTgycHVTSUJ1ZWJ5Y3pKdXljcmNBQUFBd1FEbU5SV25qcisxWmJSdgpPRjJVT2hGQ2I2UVlpQkFsTzVuWVZQUnQ2amhMWmdvMjlkUVUwUmRnYzNObmtOdzY1ZFpQbnZVMTlaamkzcFBlRnVQczJQCnEyaDg1aFNCK3VRR3JodEovRGM2MU1ZS2k5cjkxQmtvd0ZHSDR3YW9mSUsyYmF1V2VFMGg3UFFmajhrSzZVbndLbnpPSTcKc1o2anJTZStxaHQwMzkxUzhTb2F1bkhnMXNsOTRYS092bG1RQUpQMHNuS2VMcGIyalZIR0ZTR0JRdG1GQUh2aXV6Zm5nUgpGc3hrd2ROSU1ERGxLNmxVMnFhbkppL0NBM0VOQldDLzhBQUFEQkFNbXoyUkVEbllkSjM0N2prWWFDNzNHdGtjWDZDN0NxCjZ6cGRXQkZ6Zjd0NkhJbzJMdUlPenVFa2IxV0VjOFZibTBHbTA1YkZ4YnFEYjF2OWpJRmErTG9qTHVOUmFoSEZHVFRRUDYKTk9DMzA2SDd2TWgwMStNUVJNaERKYW9GRlRRVy9uSVBIQldwcDVJNzFVN0FNa0d6cXJoWVU5dlVNSXBNS2taQUQyYWF3dwpreUp6eFZzTFhUQXhrT3BVU3lWZmJsZVBKZXJpVmIydmVXbm5RUmRnRm02empSeXpSTXlYODFkaldzelNDTVZUeWI2YW9GCjdBYjZPZzlib0lnRmVQU1FBQUFCTnpjR2hwYm5oQU1qWmxNR05pWkRrM05UZGxBUUlEQkFVRwotLS0tLUVORCBPUEVOU1NIIFBSSVZBVEUgS0VZLS0tLS0K&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;parameter&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;authentication_method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;\u9375\u8a8d\u8a3c(\u30d1\u30b9\u30d5\u30ec\u30fc\u30ba\u306a\u3057)&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;host&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aap.example.com&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;isolated_tower&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;False&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;passphrase&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;password&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;remarks&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;ssh_private_key_file&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aap_id_rsa&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;user&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;awx&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;interface_info_ansible&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;parameter&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;ansible_automation_controller_port&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;443&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;ansible_automation_controller_protocol&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;authentication_token&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LwWw3dwoHGx19ZhP1YQZU0JdZzobFv&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;delete_runtime_data&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;execution_engine&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Ansible Automation Controller&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;organization_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;proxy_address&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;proxy_port&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;representative_server&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aap.example.com&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;input_limit_setting&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;result&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;000-00000&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;ts&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2023-02-03T14:47:10.185Z&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</li>
<li><p>失敗時の結果表示イメージ</p>
<div class="literal-block-wrapper docutils container" id="id22">
<div class="code-block-caption"><span class="caption-number">リスト 3.23 </span><span class="caption-text">実行結果(失敗例)</span><a class="headerlink" href="#id22" title="このコードへのパーマリンク">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>...
&lt;<span class="w"> </span>HTTP/1.1<span class="w"> </span><span class="m">400</span><span class="w"> </span>BAD<span class="w"> </span>REQUEST
&lt;<span class="w"> </span>Date:<span class="w"> </span>Thu,<span class="w"> </span><span class="m">18</span><span class="w"> </span>Aug<span class="w"> </span><span class="m">2022</span><span class="w"> </span><span class="m">05</span>:29:35<span class="w"> </span>GMT
&lt;<span class="w"> </span>Server:<span class="w"> </span>Apache/2.4.37<span class="w"> </span><span class="o">(</span>Red<span class="w"> </span>Hat<span class="w"> </span>Enterprise<span class="w"> </span>Linux<span class="o">)</span><span class="w"> </span>mod_wsgi/4.7.1<span class="w"> </span>Python/3.9
&lt;<span class="w"> </span>Content-Length:<span class="w"> </span><span class="m">252</span>
&lt;<span class="w"> </span>Connection:<span class="w"> </span>close
&lt;<span class="w"> </span>Content-Type:<span class="w"> </span>application/json
&lt;
<span class="o">{</span><span class="w"> </span><span class="o">[</span><span class="m">252</span><span class="w"> </span>bytes<span class="w"> </span>data<span class="o">]</span>
*<span class="w"> </span>Closing<span class="w"> </span>connection<span class="w"> </span><span class="m">0</span>
<span class="o">{</span>
<span class="w">  </span><span class="s2">&quot;data&quot;</span>:<span class="w"> </span>null,
<span class="w">  </span><span class="s2">&quot;message&quot;</span>:<span class="w"> </span><span class="s2">&quot;エラーメッセージ,</span>
<span class="s2">  &quot;</span>result<span class="s2">&quot;: &quot;</span>エラーコード<span class="s2">&quot;,</span>
<span class="s2">  &quot;</span>ts<span class="s2">&quot;: &quot;</span><span class="m">2022</span>-08-18T05:29:35.643Z<span class="s2">&quot;</span>
<span class="s2">}</span>
</pre></div>
</div>
</div>
</li>
</ul>
</div></div>
</section>
<section id="id4">
<h3><span class="section-number">3.2.4. </span>その他制約事項・備考<a class="headerlink" href="#id4" title="この見出しへのパーマリンク">¶</a></h3>
<section id="id5">
<h4>Ansible Automation Controller 登録を再実行する場合<a class="headerlink" href="#id5" title="この見出しへのパーマリンク">¶</a></h4>
<div class="line-block">
<div class="line">Ansible Automation Controller 登録の再実行する場合は、設定ファイルを編集後、再度スクリプトを実行して下さい。</div>
</div>
<div class="literal-block-wrapper docutils container" id="id23">
<div class="code-block-caption"><span class="caption-number">リスト 3.24 </span><span class="caption-text">コマンド</span><a class="headerlink" href="#id23" title="このコードへのパーマリンク">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>vi<span class="w"> </span>./exastro-platform/tools/initial-settings-ansible.json
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id24">
<div class="code-block-caption"><span class="caption-number">リスト 3.25 </span><span class="caption-text">コマンド</span><a class="headerlink" href="#id24" title="このコードへのパーマリンク">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./exastro-platform/tools/initial-settings-ansible.sh<span class="w"> </span>./exastro-platform/tools/initial-settings-ansible.json
</pre></div>
</div>
</div>
</section>
</section>
</section>
</section>


</div>


<div id="articleNavigation">
  <ul>
    <li class="prev"><a href="plan.html" title="前のトピックへ"><span>前のトピックへ</span><span class="section-number">2. </span>リソースプラン</a></li>
    <li class="next"><a href="../organization_management/index.html" title="次のトピックへ"><span>次のトピックへ</span>オーガナイゼーション管理</a></li>
  </ul>
</div>


<div id="pageTopLink">
  <a href="#container"><i>↑</i> Page Top</a>
</div>

</article>
</div>
</main>
</div><!-- End #contents -->
<div id="footer">
  <footer class="divInner">
    <small>Copyright © 2019-2023 NEC Corporation</small>
    <small><a href="/terms/ja.html">サイト規約</a></small>
  </footer>
</div><!-- End #footer -->

<div id="overlay"></div>
<div id="grayBack"></div>

</div><!-- End #container -->
  </body>
</html>